"use strict";angular.module("didiApp",["ngCookies","ngResource","ngSanitize","ngRoute","LocalStorageModule"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("didiApp").controller("MainCtrl",["$scope","$interval","localStorageService",function(a,b,c){function d(){h(),e(),f()}a.showNewTaskForm=!1,a.tasks=c.get("tasks");var e=function(){null===a.tasks&&(c.add("tasks",[]),a.tasks=[])},f=function(){0===a.tasks.length&&a.showNewTaskForm===!1&&(a.showNewTaskForm=!0)},g=function(){var a=new Date;return a.setHours(24,0,0,0),a.getTime()-(new Date).getTime()},h=function(){b(function(){for(var b=0;b<a.tasks.length;b++)a.tasks[b].status="incomplete";c.add("tasks",a.tasks)},g())};a.addTask=function(){var b=c.get("tasks"),d={id:b.length,created_at:new Date,completed_at:"",desc:a.newTask.desc,status:"incomplete",showDrawer:!1};b.push(d),c.add("tasks",b),a.newTask.desc="",a.tasks=c.get("tasks")},a.editTask=function(){alert("Edit support coming soon.")},a.changeStatus=function(b){b.showDrawer=!1,"incomplete"==b.status?(b.status="completed",b.completed_at=new Date):(b.status="incomplete",b.completed_at=""),c.add("tasks",a.tasks)},a.deleteTask=function(b){a.tasks.splice(b,1),c.add("tasks",a.tasks),f()},a.markAllIncomplete=function(){for(var b=0;b<a.tasks.length;b++)a.tasks[b].showDrawer=!1,a.tasks[b].status="incomplete",a.tasks[b].completed_at="";c.add("tasks",a.tasks)},a.deleteAllTasks=function(){a.tasks=[],c.clearAll(),c.add("tasks",[])},a.anyCompletedTasks=function(){for(var b=0;b<a.tasks.length;b++)if("completed"===a.tasks[b].status)return!0;return!1},a.openCloseNewTaskForm=function(){a.showNewTaskForm=!a.showNewTaskForm},a.openCloseDrawer=function(a){a.showDrawer=!a.showDrawer},d()}]),angular.module("didiApp").directive("focusHere",["$timeout",function(a){return{scope:{trigger:"@focusHere"},link:function(b,c){b.$watch("trigger",function(b){"true"===b&&a(function(){c[0].focus()})})}}}]);